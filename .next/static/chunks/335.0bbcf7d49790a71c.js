"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[335],{7335:(e,s,t)=>{t.r(s),t.d(s,{LiveMap:()=>g});var a=t(5155),l=t(2115),r=t(7054),i=t(4755),n=t(5384),d=t(6264),c=t(4136),o=t(8383),x=t(5027),m=t.n(x);t(5603),delete m().Icon.Default.prototype._getIconUrl,m().Icon.Default.mergeOptions({iconRetinaUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon-2x.png",iconUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon.png",shadowUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-shadow.png"});let p=m().divIcon({className:"user-marker",html:'<div style="background: linear-gradient(135deg, #10b981 0%, #059669 100%); width: 20px; height: 20px; border-radius: 50%; border: 3px solid white; box-shadow: 0 0 0 4px rgba(16, 185, 129, 0.3), 0 2px 8px rgba(0,0,0,0.3); animation: pulse 2s infinite;"></div>\n  <style>\n    @keyframes pulse {\n      0%, 100% { box-shadow: 0 0 0 4px rgba(16, 185, 129, 0.3), 0 2px 8px rgba(0,0,0,0.3); }\n      50% { box-shadow: 0 0 0 8px rgba(16, 185, 129, 0.1), 0 2px 8px rgba(0,0,0,0.3); }\n    }\n  </style>',iconSize:[20,20],iconAnchor:[10,10]});function h(e){let{center:s}=e,t=(0,r.ko)();return l.useEffect(()=>{t.setView(s,t.getZoom())},[s,t]),null}function g(e){let{userPosition:s,zones:t,currentZoneId:r}=e,[x,g]=l.useState(!1);if(l.useEffect(()=>{g(!0)},[]),!x||!s)return(0,a.jsx)("div",{className:"h-full w-full flex items-center justify-center bg-slate-900 rounded-2xl border border-slate-800",children:(0,a.jsxs)("div",{className:"text-center space-y-2",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-emerald-500 mx-auto"}),(0,a.jsx)("p",{className:"text-sm text-slate-400",children:s?"Loading map...":"Waiting for GPS location..."})]})});let u=[s.lat,s.lng];return(0,a.jsxs)("div",{className:"h-full w-full rounded-2xl overflow-hidden border border-slate-800 relative",children:[(0,a.jsxs)(i.W,{center:u,zoom:13,style:{height:"100%",width:"100%"},className:"z-0",children:[(0,a.jsx)(n.e,{attribution:'\xa9 <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a>',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),(0,a.jsx)(h,{center:u}),(0,a.jsx)(d.p,{position:u,icon:p,children:(0,a.jsx)(c.z,{children:(0,a.jsxs)("div",{className:"text-sm",children:[(0,a.jsx)("strong",{className:"text-emerald-600",children:"Your Location"}),(0,a.jsxs)("p",{className:"text-xs text-slate-600 mt-1",children:[s.lat.toFixed(5),"\xb0, ",s.lng.toFixed(5),"\xb0"]})]})})}),t.map(e=>{let s=e.id===r,t="HIGH"===e.severity?"#ef4444":"MEDIUM"===e.severity?"#f59e0b":"#10b981",i="HIGH"===e.severity?"rgba(239, 68, 68, 0.2)":"MEDIUM"===e.severity?"rgba(245, 158, 11, 0.2)":"rgba(16, 185, 129, 0.2)";return(0,a.jsxs)(l.Fragment,{children:[(0,a.jsx)(o.j,{center:[e.lat,e.lng],radius:e.radiusMeters,pathOptions:{color:t,fillColor:i,fillOpacity:s?.4:.2,weight:s?3:2}}),(0,a.jsx)(d.p,{position:[e.lat,e.lng],icon:m().divIcon({className:"custom-marker",html:'<div style="background-color: '.concat(t,'; width: 24px; height: 24px; border-radius: 50%; border: 3px solid white; box-shadow: 0 2px 8px rgba(0,0,0,0.3);"></div>'),iconSize:[24,24],iconAnchor:[12,12]}),children:(0,a.jsx)(c.z,{children:(0,a.jsxs)("div",{className:"text-sm max-w-xs",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)("span",{className:"px-2 py-0.5 rounded text-xs font-semibold ".concat("HIGH"===e.severity?"bg-red-100 text-red-700":"MEDIUM"===e.severity?"bg-yellow-100 text-yellow-700":"bg-green-100 text-green-700"),children:e.severity}),s&&(0,a.jsx)("span",{className:"px-2 py-0.5 rounded text-xs font-semibold bg-blue-100 text-blue-700",children:"ACTIVE"})]}),(0,a.jsx)("strong",{className:"text-slate-900",children:e.name}),e.city&&(0,a.jsxs)("p",{className:"text-xs text-slate-500 mt-1",children:[e.city,", ",e.state]}),(0,a.jsx)("p",{className:"text-xs text-slate-600 mt-2",children:e.message}),(0,a.jsxs)("p",{className:"text-xs text-slate-500 mt-2",children:["Distance: ",e.distance.toFixed(2)," km"]})]})})})]},e.id)})]}),(0,a.jsxs)("div",{className:"absolute bottom-4 right-4 bg-white/95 backdrop-blur-sm rounded-lg shadow-lg p-3 z-[1000] text-xs",children:[(0,a.jsx)("div",{className:"font-semibold text-slate-900 mb-2",children:"Risk Zones"}),(0,a.jsxs)("div",{className:"space-y-1.5",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-3 h-3 rounded-full bg-red-500"}),(0,a.jsx)("span",{className:"text-slate-700",children:"High Risk"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-3 h-3 rounded-full bg-yellow-500"}),(0,a.jsx)("span",{className:"text-slate-700",children:"Medium Risk"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-3 h-3 rounded-full bg-green-500"}),(0,a.jsx)("span",{className:"text-slate-700",children:"Low Risk"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 pt-1 border-t border-slate-200",children:[(0,a.jsx)("div",{className:"w-3 h-3 rounded-full bg-emerald-500 animate-pulse"}),(0,a.jsx)("span",{className:"text-slate-700",children:"Your Location"})]})]})]})]})}}}]);